DELIMITER $$
CREATE PROCEDURE INSERTARSALDO(IN MONTO FLOAT,IN FECHA VARCHAR(20),IN DESCRIPCION VARCHAR(400),IN IDAUXILIAR INT)
BEGIN
    SET AUTOCOMMIT=0;
    START TRANSACTION;
    INSERT INTO saldos(MONTO,FECHA,DESCRIPCION,IDAUXILIAR)VALUES(MONTO,FECHA,DESCRIPCION,IDAUXILIAR);
    UPDATE auxiliares SET SALDO=SALDO+MONTO WHERE IDAUXILIAR=IDAUXILIAR;
    IF(MYSQL_ERRNO=0) THEN
        COMMIT;
    ELSE
        BEGIN
            ROLLBACK;
            SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT='TRANSACCIÓN NO COMPLETADA', MYSQL_ERRNO='1006';
        END;
    END IF;
END;$$

DELIMITER $$
CREATE PROCEDURE INSERTARSALDO(IN MONTO FLOAT,IN FECHA VARCHAR(20),IN DESCRIPCION VARCHAR(400),IN IDAUXILIAR INT)
BEGIN
    SET AUTOCOMMIT=0;
    START TRANSACTION;
    INSERT INTO saldos(MONTO,FECHA,DESCRIPCION,IDAUXILIAR)VALUES(MONTO,FECHA,DESCRIPCION,IDAUXILIAR);
    UPDATE auxiliares SET SALDO=SALDO+MONTO WHERE IDAUXILIAR=IDAUXILIAR;
    COMMIT;
END;$$

CALL INSERTARSALDO(50,'2020/10/22','PRUEBA DE TRANSACCION',11)